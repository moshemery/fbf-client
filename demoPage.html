<!DOCTYPE html>
<html>
<head lang="en">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <meta charset="UTF-8">
    <title></title>
<style>
    .center {
    display: block;
    margin-left: auto;
    margin-right: auto;
    width: 50%;
    }
</style>

</head>
<body>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/he_IL/sdk.js#xfbml=1&version=v6.0&appId=811987785971081&autoLogAppEvents=1"></script>
<script>

    document.addEventListener("DOMContentLoaded", function(){
        //Add onclick handler to object with ID referaction
        var element = document.getElementById('referaction');
        element.onclick = function(){
            window.fbAsyncInit = function() {
                FB.init({
                    xfbml: true,
                    version: 'v6.0'});
                FB.getLoginStatus(function (response) {
                    if (response.status === 'connected') {
                else {
                        var loginToFacebook;
                        loginToFacebook= document.createElement("div");
                        loginToFacebook.id = "logintofb";
                        loginToFacebook.class = "fb-login-button";
                        loginToFacebook.setAttribute('data-size',"large");
                        loginToFacebook.setAttribute('data-button-type','continue_with');
                        loginToFacebook.setAttribute('data-layout',"default");
                        loginToFacebook.setAttribute('data-auto-logout-link',"false");
                        loginToFacebook.setAttribute('data-use-continue-as',"false");
                        var element = document.getElementById('_referaction');
                        element.appendChild(element);
                    }


                });
                (function (d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0];
                    if (d.getElementById(id)) return;
                    js = d.createElement(s);
                    js.id = id;
                    js.src = 'https://connect.facebook.net/he_IL/sdk/xfbml.customerchat.js';
                    fjs.parentNode.insertBefore(js, fjs);
                }(document, 'script', 'facebook-jssdk'));
                if (response.status === 'connected') {
                    FB.Event.subscribe('send_to_messenger',
                            function (e) {console.log(e);});
                }
            }
        }

//import code from remote server
    });
</script>

<div class="row"></div>
<div class="row">
    <div class="col-sm"> </div>
    <div class="col-sm">Would you like to chat with advisor?</div>
    <div class="col-sm"></div>
</div>
<div class="row">
    <div class="col-sm"> </div>
    <div class="col-sm"><img id="referaction" class="center" src="Icon.png" onclick=""/> </div>
    <div class="col-sm"></div>
</div>
<div class="row">
    <div class="col-sm"> </div>
    <div id="_referaction" class="col-sm">
            <div id="refDiv" class="fb-send-to-messenger" messenger_app_id="`+env.APP_ID+`" page_id="`+this.facebookPageId+`"
                 data-ref="1:` + this.partnerId + ':' + this.contextId + `" color="blue" size="xlarge" cta_text="LET_US_CHAT"></div>
        </div>
        <div id="logintofb" class="fb-login-button" data-size="large" data-button-type="continue_with" data-layout="default" data-auto-logout-link="false" data-use-continue-as="false" data-width=""></div>
    </div>`


        <div id="chatbox"/>
    </div>
    <div class="col-sm"></div>
</div>



</body>
</html>