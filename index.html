<html>
<head>
</head>

<body>
<script>
    window.fbAsyncInit = function() {
        FB.init({
            appId: 811987785971081,
            status: true,
            xfbml: true,
            version: 'v6.0'
        });

        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = 'https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js';
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));

        FB.Event.subscribe('send_to_messenger',
            function(e) {
                console.log(e);
            });

    };
</script>
<script async defer src="https://connect.facebook.net/en_US/sdk.js"></script>

<!-- Load Facebook SDK for JavaScript -->
<div id="fb-root"></div>

<div style="alignment: center; font-size: medium">
<h1>Thank you for buying product A10001 </h1>
<h2>Would you consider helping new buyers learn about it more by anonymous chatting with you?</h2>
<div id="refDiv" class="fb-send-to-messenger"
     messenger_app_id="811987785971081"
     page_id="106563677609074"
     data-ref="TALK_ABOUT_A10001"
     color="blue"
     size="large"
     cta_text='SEND_ME_MESSAGES'></div>
</div>

<p>
<div>
    <a>This button should be clicked by conssultent</a>
    <label for="subjectToTalkAbout">Subject to talk about:</label>
    <input type="text" id="subjectToTalkAbout" name="fname"><br><br>
    <button onclick="ConsultentButtonOnClick()">Task to a buyer ? click here</button>
</div>

<div class="fb-customerchat"
     attribution=setup_tool
     page_id="106563677609074"
     ref="BAMBA5">
</div>
</p>
<script>
    function ConsultentButtonOnClick()
    {
        const ref = document.getElementById('subjectToTalkAbout').value;
        const url = 'http://m.me/Bref-demo1?ref='+ref;
        window.location.href = url;

    }

    console.log(document.getElementById('refDiv'));

</script>
</body>
</html>